import { MongoClient } from 'mongodb'; import bcrypt from 'bcryptjs'; const uri=process.env.MONGODB_URI||'mongodb://localhost:27017/dpd_snomed_poc'; async function main(){ const c=new MongoClient(uri); await c.connect(); const db=c.db(); await db.collection('users').deleteMany({}); await db.collection('ingredients').deleteMany({}); await db.collection('mappings').deleteMany({}); const hash=await bcrypt.hash('admin123',10); await db.collection('users').insertMany([{email:'admin@example.com',role:'admin',passwordHash:hash},{email:'reviewer@example.com',role:'reviewer',passwordHash:hash},{email:'analyst@example.com',role:'analyst',passwordHash:hash}]); await db.collection('ingredients').insertMany([{code:'ING001',name:'Atenolol',status:'active'},{code:'ING002',name:'Hydrochlorothiazide',status:'active'}]); await db.collection('mappings').insertOne({dpdIngredientCode:'ING001',snomedId:'372755006',snomedTerm:'Atenolol (substance)',correlation:'exact',status:'approved',notes:'',updatedAt:new Date()}); console.log('Seeded'); await c.close(); } main().catch(e=>{console.error(e); process.exit(1);});
